<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Neon Dodger</title>
<style>
    body {
        margin: 0;
        background: #0b0b0f;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        font-family: 'Courier New', monospace;
        overflow: hidden;
        color: #0ff;
    }
    canvas {
        background: #111;
        border-radius: 10px;
    }
    #score {
        position: absolute;
        top: 10px;
        color: #0ff;
        font-size: 24px;
    }
</style>
</head>
<body>
<div id="score">Score: 0</div>
<canvas id="gameCanvas" width="400" height="600"></canvas>

<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');

let player = {x: 180, y: 500, width: 40, height: 40, speed: 5};
let keys = {};
let obstacles = [];
let spawnTimer = 0;
let score = 0;
let gameOver = false;

// Event listeners
document.addEventListener('keydown', e => keys[e.key] = true);
document.addEventListener('keyup', e => keys[e.key] = false);

function spawnObstacle() {
    let width = Math.random() * 60 + 30;
    let x = Math.random() * (canvas.width - width);
    let speed = Math.random() * 3 + 2;
    obstacles.push({x, y: -50, width, height: 20, speed});
}

function movePlayer() {
    if (keys['ArrowLeft'] || keys['a']) player.x -= player.speed;
    if (keys['ArrowRight'] || keys['d']) player.x += player.speed;
    // Boundaries
    if (player.x < 0) player.x = 0;
    if (player.x + player.width > canvas.width) player.x = canvas.width - player.width;
}

function moveObstacles() {
    obstacles.forEach(o => o.y += o.speed);
    obstacles = obstacles.filter(o => o.y < canvas.height + 50);
}

function checkCollision() {
    for (let o of obstacles) {
        if (player.x < o.x + o.width &&
            player.x + player.width > o.x &&
            player.y < o.y + o.height &&
            player.y + player.height > o.y) {
            gameOver = true;
        }
    }
}

function drawPlayer() {
    ctx.fillStyle = '#0ff';
    ctx.shadowColor = '#0ff';
    ctx.shadowBlur = 20;
    ctx.fillRect(player.x, player.y, player.width, player.height);
    ctx.shadowBlur = 0;
}

function drawObstacles() {
    obstacles.forEach(o => {
        ctx.fillStyle = '#f0f';
        ctx.shadowColor = '#f0f';
        ctx.shadowBlur = 15;
        ctx.fillRect(o.x, o.y, o.width, o.height);
        ctx.shadowBlur = 0;
    });
}

function draw() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    drawPlayer();
    drawObstacles();
}

function updateScore() {
    score += 1;
    document.getElementById('score').innerText = 'Score: ' + score;
}

function gameLoop() {
    if (gameOver) {
        alert('Game Over! Your score: ' + score);
        location.reload();
        return;
    }
    movePlayer();
    moveObstacles();
    checkCollision();

    spawnTimer += 1;
    if (spawnTimer > 60) { // spawn every 1 second approx
        spawnObstacle();
        spawnTimer = 0;
    }

    draw();
    updateScore();

    requestAnimationFrame(gameLoop);
}

gameLoop();
</script>
</body>
</html>
